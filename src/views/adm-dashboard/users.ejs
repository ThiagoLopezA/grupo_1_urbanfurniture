<!DOCTYPE html>
<html lang="en">
  <%- include ('../partials/head.ejs', {route:'adminDash.css', main:'', title:
  'Admin'}) %>
  <body>
    <%- include('../partials/navbar_dashboard.ejs', {url : url}) %>
    <section class="section__content">
      <article class="card__group">
        <div class="card__resume">
          <div class="resume__information">
            <h2 class="information__quantity">1</h2>
            <h4 class="information__title">Cantidad de usuarios</h4>
          </div>
          <i class="fa-solid fa-users information__icon"></i>
        </div>
        <div class="card__resume">
          <div class="resume__information">
            <h2 class="information__quantity">2</h2>
            <h4 class="information__title">Usuarios administrador</h4>
          </div>
          <i class="fa-solid fa-user-shield information__icon"></i>
        </div>
        <div class="card__resume">
          <div class="resume__information">
            <h2 class="information__quantity">12</h2>
            <h4 class="information__title">Usuarios clientes</h4>
          </div>
          <i class="fa-solid fa-user information__icon"></i>
        </div>
      </article>
      <article class="product__header">
        <h2 class="header__title">Productos</h2>
        <button class="header__button" id="addProduct">
          <i class="fa-solid fa-plus"></i>Agregar usuario
        </button>
      </article>

      <article class="article__modal">
        <div class="modal__body">
          <div class="modal__header">
            <i class="fa-solid fa-xmark close__icon"></i>
          </div>
          <form action="/users/register" class="modal__form" method="POST">
            <div class="form__group">
              <input
                type="text"
                class="form__input"
                name="first_name"
                placeholder="Nombre del usuario"
              />
              <input
                type="text"
                class="form__input"
                name="last_name"
                placeholder="Apellido"
              />
            </div>
            <input
              type="text"
              name="email"
              placeholder="Email"
              class="form__input"
            />
            <input
              type="password"
              name="password"
              placeholder="Contraseña"
              class="form__input"
            />
            <input
              type="password"
              name="password_confirm"
              placeholder="Confirmar contraseña"
              class="form__input"
            />
            <button class="form__button">Agregar usuario</button>
          </form>
        </div>
      </article>

      <article class="product__form">
        <form action="/admin/users/search" method="GET">
          <div class="input__group">
            <input type="text" class="search__input" name="keywords" />
            <button type="submit" class="search__button">
              <i class="fa-solid fa-magnifying-glass"></i>
            </button>
          </div>
        </form>
      </article>
      <table class="table table--wide">
        <tr>
          <th class="table__title">Id</th>
          <th class="table__title">Nombre</th>
          <th class="table__title">Apellido</th>
          <th class="table__title">Email</th>
          <th></th>
        </tr>
        <% users.forEach(user => { %>
        <tr class="table__row">
          <td><%=user.dataValues.idusers%></td>
          <td><%=user.dataValues.first_name%></td>
          <td><%=user.dataValues.last_name%></td>
          <td><%=user.email%></td>
          <td class="td__options">
            <a href="/admin/users/edit/<%=user.dataValues.idusers%>">
              <button class="table__buttons">
                <i class="fa-solid fa-pen"></i>
              </button>
            </a>
            <a href="/admin/users/delete/<%=user.dataValues.idusers%>">
              <button class="table__buttons">
                <i class="fa-solid fa-xmark"></i>
              </button>
            </a>
          </td>
        </tr>
        <% }) %>
      </table>
    </section>
  </body>
  <script src="/public/js/adminProducts.js"></script>
</html>
